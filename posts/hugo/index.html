<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Time for a website | Jeroen Nyckees</title><link rel=stylesheet href=https://jenyckee.github.io/css/style.css><link rel=stylesheet href=/css/custom.css><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/d3/4.1.0/d3.js></script><script src=https://d3js.org/topojson.v2.min.js></script></head><body><section class=section><div class=container><nav class=nav><div class=nav-right></div></nav><div class=nav-center><nav class="nav-item level is-mobile"><div class=nav-left><a class=nav-item href=https://jenyckee.github.io/><img class=avatar src=/svg/avatar.svg alt=#></a></div><div><h1>Jeroen Nyckees</h1><div class=text-center><a class=level-item href=mailto:jeroen.nyckees@gmail.com target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</i></span></a><a class=level-item href=https://github.com/jenyckee target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</i></span></a><a class=level-item href=https://linkedin.com/in/jeroen-nyckees-3a191582/ target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path stroke-width="1.8" d="m5.839218 4.101561c0 1.211972-.974141 2.194011-2.176459 2.194011S1.4863 5.313533 1.4863 4.101561c0-1.211094.974141-2.194011 2.176459-2.194011s2.176459.982917 2.176459 2.194011zm.017552 3.94922H1.468748v14.04167H5.85677V8.050781zm7.005038.0H8.501869v14.04167h4.360816v-7.370999c0-4.098413 5.291077-4.433657 5.291077.0v7.370999h4.377491v-8.89101c0-6.915523-7.829986-6.66365-9.669445-3.259423V8.050781z"/></svg></i></span></a></div></div></nav></div></div></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"><a class="subtitle is-6" href=/tags/git/>#git</a>
| <a class="subtitle is-6" href=/tags/hugo/>#hugo</a></div><h2 class="subtitle is-6">September 12, 2017</h2><h1 class=title>Time for a website</h1><div class=content><h2 id=my-set-up>My set up</h2><p>For this site I&rsquo;ll be using Hugo, a static site generator that I&rsquo;ve been using for several projects at the moment. Because in my search for a good and easy solution to host on Github pages I didn&rsquo;t find a good source of information, I will start off with giving a short guide on how I set up my site.</p><p>Assuming that you have set up your website using the guide on the Hugo website you will have a folder with the source of your website. To deploy to Github Pages you will need to create a repository that has the index.html file at the root on the master branch. Unfortanetly Hugo builds the pages into a folder named public. To overcome this, I have a solution based on this approach. I keep the source for the website in my local repository on a develop branch, and the build on the master.</p><h2 id=github-setup>Github Setup</h2><p>After creating the repository on Github, add a .gitignore file to the master branch that looks like this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>themes/
</span></span><span style=display:flex><span>public/</span></span></code></pre></div><p>This will make sure the build of the website and the theme being stays untracked in the Git repository.</p><h2 id=local-setup>Local Setup</h2><p>Then locally, initialize a Git repository at the root of your site and checkout a develop branch immediately. Commit your files and add Github as a remote.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git init
</span></span><span style=display:flex><span><span style=color:#75715e># create new branch called develop and switch to it.</span>
</span></span><span style=display:flex><span>git checkout -b develop
</span></span><span style=display:flex><span><span style=color:#75715e># track all the source files for our site.</span>
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span><span style=color:#75715e># make our first commit</span>
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;initial commit.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># and add the GitHub repository as a remote.</span>
</span></span><span style=display:flex><span>git remote add origin &lt;URL to your GitHub pages repository&gt;</span></span></code></pre></div><h2 id=deploying>Deploying</h2><p>To deploy create a file deploy.sh and make it executable. This script will build the website into the public folder and then checkout to the master branch. Since the public folder is untracked we can use this to copy everything to the root, commit that to the master branch and push that to the Github remote. Once that is done we have succesfully deployed, we can now checkout the develop branch again and delete the master branch locally.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># Temporarily store uncommited changes</span>
</span></span><span style=display:flex><span>git stash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify correct branch</span>
</span></span><span style=display:flex><span>git checkout develop
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Build new files</span>
</span></span><span style=display:flex><span>hugo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get previous files</span>
</span></span><span style=display:flex><span>git fetch --all
</span></span><span style=display:flex><span>git checkout -b master --track origin/master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overwrite existing files with new files</span>
</span></span><span style=display:flex><span>cp -a public/. .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Commit</span>
</span></span><span style=display:flex><span>git add -A
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;Publish.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Push</span>
</span></span><span style=display:flex><span>git push origin master:master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Restoration</span>
</span></span><span style=display:flex><span>git checkout develop
</span></span><span style=display:flex><span>git branch -D master
</span></span><span style=display:flex><span>git stash pop</span></span></code></pre></div><h1 id=keep-source-private>Keep source private</h1><p>Finally I host the actual source of my website on a private Bitbucket account by setting your upstream for the develop branch to the Bitbucket repository.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Add bitbucket as a remote</span>
</span></span><span style=display:flex><span>git remote add bitbucket https://bitbucket.com/user/repo.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Push and set upstream for remote branch to bitbucket repo</span>
</span></span><span style=display:flex><span>git push --set-upstream bitbucket develop</span></span></code></pre></div></div></div></section><section class=section><div class="container has-text-centered"><p></p></div></section></body></html>